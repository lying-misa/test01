<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
<title>聚才人力集团在线刷题系统</title>
<link href="__PUBLIC__/mobile/css/mui.min.css" rel="stylesheet"/>
<link href="__PUBLIC__/mobile/css/iconfont.css" rel="stylesheet"/>
<link href="__PUBLIC__/mobile/css/common.css" rel="stylesheet"/>
<script src="__PUBLIC__/mobile/js/mui.min.js"></script>
</head>
<body>
<header class="mui-bar mui-bar-nav bg-theme "> 
	<button class="mui-action-back mui-btn mui-btn-link mui-btn-nav mui-pull-left" style="color: #fff;"><span class="mui-icon mui-icon-left-nav"></span>返回</button>
  <h1 class="mui-title colorF">找回密码</h1>
  <a class="mui-icon mui-action-menu mui-icon-chat mui-pull-right colorF" href="/mobile/member/message.html"></a> </header>
	
	
	<div class="mui-content mui-scroll-wrapper"  >
  <div class="mui-scroll">
	  <div class="color9 font_small" style="padding: 0.3rem;">修改密码前需验证您的身份信息</div>
	  <form class="mui-input-group">
    <div class="mui-input-row">
    	<input type="text" class="mui-input-clear" name="tel" placeholder="请输入手机号码" style="width: 65%">
		<button type="button" id="J_get_checkcode" class="mui-btn mui-btn-primary mui-btn-outlined" style="border:none;width: 35%;margin-top: 0.05rem;">获取验证码</button>
    </div>
    <div class="mui-input-row">
        <input type="text" class="mui-input-clear" name="checkcode" placeholder="请输入验证码">
    </div>
	 <div class="mui-input-row">
        <input type="password" class="mui-input-password" name="npwd" placeholder="请输入新密码">
    </div>
		
</form>
	   <div class="color9 font_small" style="padding: 0.3rem;">密码由6-8位数字或字母组成</div>
		  
		  
		  
    <div class="mui-button-row" >
		<button id="J_change_pwd" type="button" class="mui-btn mui-btn-blue" style="width: 90%; background: linear-gradient(to right, #4981ed , #475ee9);border: none;padding: 0.2rem;border-radius: 0.1rem;">提交</button>
    </div>
	</div></div>
</body>
	
	<script>
	var telcheck=/^1[0-9]{10}$/;   /*定义验证表达式*/
	mui.init();
	//获取短信验证码
	mui("body").on("tap","#J_get_checkcode",function(){
		var tel=document.getElementsByName("tel")[0].value;
		if(!tel){mui.toast('请填写手机号！',{ duration:'long', type:'div' });return false;}
		if(!telcheck.test(tel)){mui.toast('手机格式不正确！',{ duration:'long', type:'div' });return false;}
		mui.ajax('http://server-name/login.php',{
			data:{tel:tel},
			dataType:'json',//服务器返回json格式数据
			type:'post',//HTTP请求类型
			headers:{'Content-Type':'application/json'},	              
			success:function(data){
				//服务器返回响应，根据响应结果，分析是否登录成功；
				alert(data.msg);
			},
			error:function(xhr,type,errorThrown){
				//异常处理；
				console.log(type);
			}
		});
	})
	//提交
	mui("body").on("tap","#J_change_pwd",function(){
		var tel=document.getElementsByName("tel")[0].value;
		var checkcode=document.getElementsByName("checkcode")[0].value;
		var npwd=document.getElementsByName("npwd")[0].value;
		if(!tel){mui.toast('请填写手机号！',{ duration:'long', type:'div' });return false;}
		if(!telcheck.test(tel)){mui.toast('手机格式不正确！',{ duration:'long', type:'div' });return false;}
		if(!checkcode){mui.toast('请填写验证码！',{ duration:'long', type:'div' });return false; }
		if(!npwd){mui.toast('请填写新密码！',{ duration:'long', type:'div' });return false; }
		mui.ajax('http://server-name/login.php',{
			data:{
				tel:tel,
				checkcode:checkcode,
				npwd:npwd
			},
			dataType:'json',//服务器返回json格式数据
			type:'post',//HTTP请求类型
			timeout:10000,//超时时间设置为10秒；
			headers:{'Content-Type':'application/json'},	              
			success:function(data){
				//服务器返回响应，根据响应结果，分析是否登录成功；
				alert(data.msg);
			},
			error:function(xhr,type,errorThrown){
				//异常处理；
				console.log(type);
			}
		});
	});
	mui('body').on('tap','a',function(){
		window.top.location.href=this.href;
	});
	</script>
</html>
